---
title: Create a Project
---

import { File, Folder, Files } from 'fumadocs-ui/components/files';
import { CMakeIcon } from '@/components/icons/cmake';
import { GradleIcon } from '@/components/icons/gradle';
import { TomlIcon } from '@/components/icons/toml';
import { TypeScriptIcon } from '@/components/icons/typescript';
import { RustIcon } from '@/components/icons/rust';
import { NodeJsIcon } from '@/components/icons/nodejs';

This guide will walk you through creating your first Craby module from scratch.

## Compatibility

Craby-built modules require a minimum React Native version of:

- `>= 0.76.0` (**with New Architecture enabled**)

## Prerequisites

<Callout title="warning macOS Required" type="warning">
  Craby development requires **macOS** with **Xcode 12 or higher** for building [\*-apple-ios](https://doc.rust-lang.org/rustc/platform-support/apple-ios.html) targets.
</Callout>

Before you begin, make sure you have the following installed:

- **macOS**: Required for building iOS targets
- **XCode 12+**: [Download](https://developer.apple.com/xcode)
- **Node.js 18+**: [Download](https://nodejs.org/)
- **Rust 1.82+**: Install via [rustup](https://rustup.rs/)
- **Android NDK**: [Download](https://developer.android.com/ndk/downloads)

```bash
# Set `ANDROID_NDK_HOME` environment variable
export ANDROID_NDK_HOME=/path/to/android-ndk
```

## Create a Project

You have two options for getting started with Craby: scaffolding a new module or adding it manually to an existing project.

### Option 1: Scaffold a New Module (Recommended)

The quickest way to get started is to use the `crabygen init` command:

```bash
npx crabygen init <package-name>
cd <package-name>
```

This will create a complete module structure with:

- Rust workspace configuration
- Native build setup (Android/iOS)
- Package configuration

### Option 2: Manual Installation

If you want to add Craby to an existing React Native module:

<Tabs items={['npm', 'pnpm', 'yarn']}>
  <Tab value="npm">
    ```bash
    npm install craby-modules
    npm install --save-dev crabygen
    ```
  </Tab>
  <Tab value="pnpm">
    ```bash
    pnpm add craby-modules
    pnpm add -D crabygen
    ```
  </Tab>
  <Tab value="yarn">
    ```bash
    yarn add craby-modules
    yarn add -D crabygen
    ```
  </Tab>
</Tabs>

After installation, you'll need to set up the project structure manually (see [default template](https://github.com/leegeunhyeok/craby/tree/main/template)).

## Project Structure

After scaffolding or setup, your project will have this structure:

<Files>
  <Folder name="your-module" defaultOpen>
    <Folder name="src" defaultOpen>
      <File name="index.ts" icon={<TypeScriptIcon fill="currentColor" />} />
      <File name="NativeModule.ts" icon={<TypeScriptIcon fill="currentColor" />} />
    </Folder>
    <Folder name="crates" defaultOpen>
      <Folder name="lib" defaultOpen>
        <File name="Cargo.toml" icon={<TomlIcon fill="currentColor" />}/>
        <File name="build.rs" icon={<RustIcon fill="currentColor" />} />
        <Folder name="src" defaultOpen>
          <File name="lib.rs" icon={<RustIcon fill="currentColor" />} />
          <File name="ffi.rs" icon={<RustIcon fill="currentColor" />} />
          <File name="generated.rs" icon={<RustIcon fill="currentColor" />} />
        </Folder>
      </Folder>
    </Folder>
    <Folder name="cpp" disabled />
    <Folder name="android" defaultOpen>
      <File name="build.gradle" icon={<GradleIcon fill="currentColor" />} />
      <File name="CMakeLists.txt" icon={<CMakeIcon fill="currentColor" />} />
    </Folder>
    <Folder name="ios" defaultOpen>
      <Folder name="framework" disabled />
    </Folder>
    <File name="Cargo.toml" icon={<TomlIcon fill="currentColor" />} />
    <File name="craby.toml" icon={<TomlIcon fill="currentColor" />} />
    <File name="rust-toolchain.toml" icon={<TomlIcon fill="currentColor" />} />
    <File name="package.json" icon={<NodeJsIcon fill="currentColor" />} />
  </Folder>
</Files>

## Your First Module

Let's create a simple calculator module to understand the Craby workflow.



<Callout>
  You can use the `doctor` command to verify that all requirements are met.

  ```bash
  npx crabygen doctor
  ```
</Callout>

### Step 1: Define the TypeScript Spec

Create `src/NativeCalculator.ts`:

<Callout type="warning">
  Spec files **must** be prefixed with `Native` (e.g., `NativeCalculator.ts`) to be recognized by the code generator.
</Callout>

```typescript title="NativeCalculator.ts"
import type { NativeModule } from 'craby-modules';
import { NativeModuleRegistry } from 'craby-modules';

export interface Spec extends NativeModule {
  add(a: number, b: number): number;
  subtract(a: number, b: number): number;
  multiply(a: number, b: number): number;
  divide(a: number, b: number): number;
}

export default NativeModuleRegistry.getEnforcing<Spec>('Calculator');
```

See [Module Definition](/guide/module-definition) for more details.

### Step 2: Generate Code

Run the code generation command:

```bash
npx crabygen
```

### Step 3: Implement the Rust Logic

When you run `crabygen` for the first time, it generates a default implementation file based on your module spec. Open `crates/lib/src/calculator_impl.rs` and implement the trait:

<Callout>
  The default implementation file is only generated once to prevent overwriting your custom code. You can always reference the template in the `.craby` folder at your project root if needed.
</Callout>

```rust title="calculator_impl.rs"
use craby::prelude::*;

use crate::ffi::bridging::*;
use crate::generated::*;

pub struct Calculator {
    ctx: Context,
}

#[craby_module]
impl CalculatorSpec for Calculator {
    fn add(&mut self, a: Number, b: Number) -> Number {
        a + b
    }

    fn subtract(&mut self, a: Number, b: Number) -> Number {
        a - b
    }

    fn multiply(&mut self, a: Number, b: Number) -> Number {
        a * b
    }

    fn divide(&mut self, a: Number, b: Number) -> Number {
        a / b
    }
}
```

### Step 4: Build Native Binaries

Build the Rust code for all target platforms:

```bash
npx crabygen build
```

### Step 5: Sync with Native Projects

After building the native binaries, install CocoaPods dependencies for iOS:

```bash
cd ios && pod install
```

For Android, Gradle will automatically sync when you build the React Native app.

### Step 6: Build the React Native Application and Run

Now you can use your module in your React Native app:

```typescript title="usage.ts"
import { Calculator } from 'your-module';

Calculator.add(10, 5); // 15
Calculator.subtract(10, 5); // 5
Calculator.multiply(10, 5); // 50
Calculator.divide(10, 5); // 2
```

## Next Steps

Now that you've created your first module, explore:

- [Configuration](/guide/configuration) - Learn about Craby configuration
- [Module Definition](/guide/module-definition) - Learn about module specs and types
- [How to Build](/guide/build) - Build native binaries and packaging
